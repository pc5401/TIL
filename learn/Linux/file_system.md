# Linux 파일 시스템 정리
Linux 파일 시스템은 운영 체제의 핵심으로, 데이터 저장과 관리를 위한 구조를 제공한다. Linux에서는 **모든 것이 파일**로 간주되며, 파일 시스템은 이를 조직화하고 관리하는 역할을 한다. 이번 정리에서는 Linux 파일 시스템의 구조, 주요 파일 시스템 종류, 디렉터리 구조, 파일 권한, 그리고 알아두면 유용한 명령어들에 대해 자세히 살펴보겠다.

## 목차

- [Linux 파일 시스템 정리](#linux-파일-시스템-정리)
  - [목차](#목차)
  - [Linux 파일 시스템의 개요](#linux-파일-시스템의-개요)
  - [주요 파일 시스템 종류](#주요-파일-시스템-종류)
  - [Linux 디렉터리 구조](#linux-디렉터리-구조)
    - [주요 디렉터리 및 설명](#주요-디렉터리-및-설명)
    - [트리 구조 예시](#트리-구조-예시)
  - [파일 권한과 소유권](#파일-권한과-소유권)
    - [권한 설정 예시](#권한-설정-예시)
  - [마운트와 언마운트](#마운트와-언마운트)
  - [파일 시스템 관리 명령어](#파일-시스템-관리-명령어)
  - [알아두면 좋은 지식과 명령어](#알아두면-좋은-지식과-명령어)
    - [심볼릭 링크와 하드 링크](#심볼릭-링크와-하드-링크)
    - [파일 시스템 타입 확인](#파일-시스템-타입-확인)
    - [디스크 파티션 관리](#디스크-파티션-관리)
    - [스왑 영역 관리](#스왑-영역-관리)
    - [파일 시스템 사용량 분석](#파일-시스템-사용량-분석)
    - [로그 파일 관리](#로그-파일-관리)
  - [결론](#결론)
## Linux 파일 시스템의 개요

Linux 파일 시스템은 **계층적 트리 구조**를 가지며, 모든 파일과 디렉터리는 루트 디렉터리(`/`) 아래에 위치한다. 이러한 구조는 파일과 디렉터리를 효율적으로 관리하고 접근할 수 있도록 설계되어 있다.

## 주요 파일 시스템 종류

Linux에서는 다양한 파일 시스템을 지원하며, 각 파일 시스템은 고유한 특징과 장점을 가진다.

- **ext2 (Second Extended File System)**:
    - 안정적이고 널리 사용되었으나 **저널링 기능**이 없다.
    - 플래시 메모리나 USB 드라이브 등에 적합하다.
- **ext3**:
    - ext2의 저널링 기능이 추가된 버전이다.
    - 데이터 손실 방지 기능을 제공하여 시스템 충돌 시 복구 시간을 단축한다.
- **ext4**:
    - ext3의 확장 버전으로, **대용량 파일** 및 디렉터리를 지원하며 성능이 향상되었다.
    - **64비트 저장소**와 **디스크 조각 모음 방지** 기능이 있다.
- **XFS**:
    - 고성능 파일 시스템으로, **대용량 파일 처리**에 강점을 가진다.
    - 실시간 파일 시스템으로, 병렬 I/O를 지원한다.
- **Btrfs (B-tree File System)**:
    - 최신 파일 시스템으로, 데이터 무결성 및 **스냅샷** 기능을 제공한다.
    - **RAID 기능**과 **압축**을 지원하여 저장소 효율을 높인다.

## Linux 디렉터리 구조

Linux의 디렉터리 구조는 사용자와 시스템 파일을 체계적으로 관리하기 위한 계층적 구조를 따른다.

### 주요 디렉터리 및 설명

- **/** (루트 디렉터리): 모든 파일과 디렉터리의 최상위 위치.
- **/bin**: 기본 시스템 명령어들이 저장된 디렉터리.
- **/boot**: 부팅에 필요한 파일들과 커널 이미지가 저장됨.
- **/dev**: 시스템의 장치 파일들이 위치하며, 하드웨어 장치들이 파일 형태로 표현됨.
- **/etc**: 시스템 전역 설정 파일들이 저장됨.
- **/home**: 일반 사용자들의 홈 디렉터리.
- **/lib**: 공유 라이브러리와 커널 모듈들이 저장됨.
- **/mnt**: 임시 마운트 지점으로 외부 파일 시스템을 마운트할 때 사용.
- **/opt**: 추가 소프트웨어 패키지가 설치되는 디렉터리.
- **/proc**: 커널과 프로세스 정보가 저장되는 가상 파일 시스템.
- **/root**: 시스템 관리자(root)의 홈 디렉터리.
- **/sbin**: 시스템 관리용 명령어들이 저장됨.
- **/tmp**: 임시 파일들이 저장되는 디렉터리로, 시스템 재부팅 시 내용이 삭제될 수 있음.
- **/usr**: 사용자 프로그램과 데이터가 저장됨.
- **/var**: 로그 파일, 스풀 파일 등 가변 데이터를 저장하는 디렉터리

### 트리 구조 예시

```bash
bash
코드 복사
/
├── bin
├── boot
├── dev
├── etc
│   ├── nginx
│   ├── ssh
│   └── ...
├── home
│   ├── user1
│   └── user2
├── lib
├── mnt
├── opt
├── proc
├── root
├── sbin
├── tmp
├── usr
│   ├── bin
│   ├── lib
│   └── local
└── var
    ├── log
    ├── spool
    └── www
```

## 파일 권한과 소유권

Linux에서는 파일과 디렉터리에 대한 **권한과 소유권**을 통해 보안을 관리한다.

- **소유자(owner)**: 파일을 소유한 사용자.
- **그룹(group)**: 파일이 속한 그룹.
- **권한(permissions)**:
    - **읽기(r)**: 파일 내용을 읽을 수 있는 권한.
    - **쓰기(w)**: 파일 내용을 수정할 수 있는 권한.
    - **실행(x)**: 파일을 실행하거나 디렉터리에 접근할 수 있는 권한.

권한은 소유자, 그룹, 기타 사용자로 구분되며, 이를 숫자로 표현할 수 있다.

- **권한 숫자 표기법**:
    - 읽기(r) = 4
    - 쓰기(w) = 2
    - 실행(x) = 1

예를 들어, `rwxr-xr--`는 숫자로 `754`로 표현된다.

### 권한 설정 예시

- **권한 확인**:
    
    ```bash
    ls -l filename
    ```
    
- **권한 변경**:
    
    ```bash
    chmod 755 filename
    ```
    
- **소유자 변경**:
    
    ```bash
    chown user filename
    ```
    
- **그룹 변경**:
    
    ```bash
    chgrp group filename
    ```
    

## 마운트와 언마운트

파일 시스템을 사용하려면 해당 파일 시스템을 특정 디렉터리에 **마운트(mount)** 해야 한다.

- **마운트**:
    
    ```bash
    mount /dev/sda1 /mnt
    ```
    
- **언마운트**:
    
    ```bash
    umount /mnt
    ```
    
- **마운트된 파일 시스템 확인**:
    
    ```bash
    mount
    ```
    
- **/etc/fstab 파일**: 부팅 시 자동으로 마운트할 파일 시스템 정보를 저장하는 파일.
    
    예시 내용:
    
    ```bash
    /dev/sda1   /       ext4    defaults    0   1
    /dev/sda2   /home   ext4    defaults    0   2
    ```
    

## 파일 시스템 관리 명령어

- **mkfs**: 파일 시스템 생성
    
    ```bash
    mkfs -t ext4 /dev/sdb1
    ```
    
- **fsck**: 파일 시스템 검사 및 복구
    
    ```bash
    fsck /dev/sdb1
    ```
    
- **df**: 파일 시스템의 디스크 사용량 확인
    
    ```bash
    df -h
    ```
    
- **du**: 디렉터리별 디스크 사용량 확인
    
    ```bash
    du -sh /home/user
    ```
    
- **mount**: 파일 시스템 마운트
- **umount**: 파일 시스템 언마운트
- **lsblk**: 블록 장치 목록 확인
    
    ```bash
    lsblk
    ```
    
- **blkid**: 블록 장치의 UUID 확인
    
    ```bash
    blkid /dev/sdb1
    ```
    

## 알아두면 좋은 지식과 명령어

### 심볼릭 링크와 하드 링크

- **심볼릭 링크(소프트 링크)**:
    
    ```bash
    ln -s /path/to/original /path/to/link
    ```
    
- **하드 링크**:
    
    ```bash
    ln /path/to/original /path/to/link
    ```
    

### 파일 시스템 타입 확인

```bash
df -T
```

### 디스크 파티션 관리

- **fdisk**: 디스크 파티션 관리 도구
    
    ```bash
    fdisk /dev/sdb
    ```
    
- **parted**: GPT 파티션 관리 도구
    
    ```bash
    parted /dev/sdb
    ```
    

### 스왑 영역 관리

- **스왑 생성**:
    
    ```bash
    mkswap /dev/sdb2
    ```
    
- **스왑 활성화**:
    
    ```bash
    swapon /dev/sdb2
    ```
    
- **스왑 비활성화**:
    
    ```bash
    swapoff /dev/sdb2
    ```
    

### 파일 시스템 사용량 분석

- **ncdu**: 디스크 사용량을 인터랙티브하게 분석
    
    ```bash
    ncdu /
    ```
    

### 로그 파일 관리

- **로그 확인**:
    
    ```bash
    tail -f /var/log/syslog
    ```
    
- **로그 정리**:
    
    ```bash
    logrotate /etc/logrotate.conf
    ```
    

## 결론

Linux 파일 시스템은 강력하고 유연한 구조를 제공하여 다양한 환경에서 효율적으로 동작한다. 파일 시스템의 종류와 디렉터리 구조, 권한 관리 등을 이해하면 시스템을 보다 효과적으로 관리할 수 있다.