# 🧭 Visitor Pattern — “객체 구조는 그대로, **새 연산**만 계속 추가” (Python)

> **핵심**
> 안정적인 **객체 구조(트리/그래프)** 위에, 구조를 건드리지 않고 **새 연산(행동)** 을 추가하고 싶을 때.
> → 각 요소가 `accept(visitor)`로 **방문자**를 받아들이고, 방문자는 요소 타입별 메서드(`visit_*`)로 작업한다.
> *= 더블 디스패치 기법.*

---

## 1) 언제 쓰나?

| 상황                     | 문제                                 | Visitor로 해결                          |
| ---------------------- | ---------------------------------- | ------------------------------------ |
| **AST(수식/파서)**         | 평가, 최적화, pretty print 등 연산이 계속 늘어남 | 구조(노드 클래스)는 고정, 방문자만 새로 추가           |
| **파일/폴더 트리**           | 크기 합, 권한 검사, 인덱싱 등 각기 다른 연산        | `SizeVisitor`, `IndexVisitor` 등으로 분리 |
| **컴포지트(Composite) 구조** | 연산이 클래스 안에 퍼짐 → SRP 위반             | 연산을 Visitor 밖으로 빼 SRP 회복             |

---
