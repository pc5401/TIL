# IP 주소 및 서브넷팅

## 1. IPv4 vs. IPv6

#### **IPv4**

- **주소 형식**: 32비트 길이, 4개의 8비트 옥텟으로 구성 (예: 192.168.1.1)
- **주소 수**: 약 43억 개 (2^32)
- **표기법**: 점-십진수 (Dotted decimal notation)
- **주요 특징**: NAT(Network Address Translation) 사용으로 주소 부족 문제 해결, 보안과 자동 구성 기능 부족

#### **IPv6**

- **주소 형식**: 128비트 길이, 16개의 16비트 섹션으로 구성 (예: 2001:0db8:85a3:0000:0000:8a2e:0370:7334)
- **주소 수**: 사실상 무한대 (2^128)
- **표기법**: 콜론-16진수 (Colon-hexadecimal notation)
- **주요 특징**: 넉넉한 주소 공간, 향상된 보안 (IPSec 내장), 자동 구성 (Stateless Address Autoconfiguration)

## 2. IP 주소의 구조와 클래스

**IP 주소 구조 (IPv4)**

- **네트워크 부분**: 네트워크를 식별하는 부분
- **호스트 부분**: 네트워크 내의 특정 장치를 식별하는 부분

**IP 주소 클래스 (IPv4)**

- **클래스 A**
  - 첫 옥텟 범위: 1-126
  - 네트워크/호스트 비트: N.H.H.H (8/24 비트)
  - 서브넷 마스크: 255.0.0.0
  - 예: 10.0.0.1
- **클래스 B**
  - 첫 옥텟 범위: 128-191
  - 네트워크/호스트 비트: N.N.H.H (16/16 비트)
  - 서브넷 마스크: 255.255.0.0
  - 예: 172.16.0.1
- **클래스 C**
  - 첫 옥텟 범위: 192-223
  - 네트워크/호스트 비트: N.N.N.H (24/8 비트)
  - 서브넷 마스크: 255.255.255.0
  - 예: 192.168.1.1
- **클래스 D (멀티캐스트)**
  - 첫 옥텟 범위: 224-239
- **클래스 E (실험적)**
  - 첫 옥텟 범위: 240-255

## 3. 서브넷 마스크와 서브넷팅 계산법

**서브넷 마스크**

- **정의**: IP 주소를 네트워크와 호스트 부분으로 나누기 위해 사용하는 비트 패턴
- **기본 서브넷 마스크**:
  - 클래스 A: 255.0.0.0
  - 클래스 B: 255.255.0.0
  - 클래스 C: 255.255.255.0

**서브넷팅**

- **목적**: 큰 네트워크를 더 작은 서브넷으로 나눠 네트워크 관리를 용이하게 하고 주소 낭비를 줄임
- **방법**:
  1. **서브넷 마스크 결정**: 네트워크와 호스트 부분을 명확히 구분
  2. **서브넷 개수 계산**: 2^n (n은 서브넷 비트 수)
  3. **호스트 개수 계산**: 2^h - 2 (h는 호스트 비트 수, 2는 네트워크와 브로드캐스트 주소)
  4. **서브넷 주소 계산**: 네트워크 주소 + 서브넷 마스크 적용

**예제**: IP 주소 192.168.1.0/24를 서브넷팅

- **서브넷 마스크**: 255.255.255.0
- **새 서브넷 마스크 (2개 서브넷으로 나눔)**: 255.255.255.128 (/25)
  - 서브넷 1: 192.168.1.0/25 (호스트 범위: 192.168.1.1 - 192.168.1.126)
  - 서브넷 2: 192.168.1.128/25 (호스트 범위: 192.168.1.129 - 192.168.1.254)

## 4. 서브넷팅의 장점과 필요성

### 서브넷팅의 장점

1. **네트워크 효율성 향상**: 큰 네트워크를 작은 서브넷으로 나누어 관리함으로써, 네트워크 성능이 개선된다. 브로드캐스트 트래픽이 감소하고, 충돌 도메인이 줄어들어 효율이 증가한다.
2. **주소 낭비 감소**: 서브넷팅을 통해 네트워크를 필요에 맞게 나눌 수 있어, IP 주소를 효율적으로 사용할 수 있다. 이는 IP 주소의 고갈 문제를 완화시킨다.
3. **보안 강화**: 서브넷을 나누어 각 서브넷에 대해 별도의 보안 정책을 적용할 수 있다. 이는 네트워크 침입 시 피해를 최소화하는 데 도움이 된다.
4. **관리 용이성**: 서브넷팅을 통해 네트워크를 논리적으로 나눔으로써, 특정 부서나 부문에 맞춘 네트워크 관리를 할 수 있다. 이는 네트워크 트래픽의 모니터링과 문제 해결을 쉽게 한다.

### 서브넷팅의 필요성

1. **네트워크 확장성**: 기업이나 조직이 성장함에 따라 네트워크도 확장되어야 한다. 서브넷팅은 네트워크를 유연하게 확장할 수 있게 하며, 네트워크 구조를 더 잘 계획할 수 있도록 도와준다.
2. **브로드캐스트 도메인 관리**: 브로드캐스트 트래픽은 네트워크의 성능을 저하시킬 수 있다. 서브넷팅을 통해 브로드캐스트 도메인을 분리하여, 트래픽이 필요한 부분에만 영향을 미치도록 할 수 있다.
3. **효과적인 네트워크 설계**: 서브넷팅은 네트워크를 보다 체계적이고 효율적으로 설계할 수 있게 한다. 이로 인해 IP 주소를 절약하고, 네트워크의 복잡성을 줄일 수 있다.

## 5. 클래스리스 인터-도메인 라우팅 (CIDR)

### **CIDR 개요**

- **정의**: 기존의 클래스 기반 주소 체계를 대체하여 IP 주소 할당의 유연성을 높인 방식
- **표기법**: IP 주소 뒤에 슬래시(`/`)와 서브넷 마스크의 비트 수를 표시 (예: 192.168.0.0/22)
- **장점**:
    - 주소 공간의 효율적 사용
    - 라우팅 테이블 크기 감소
    - 네트워크 설계의 유연성 증가

### **CIDR의 작동 방식**

- 서브넷 마스크를 고정된 클래스가 아닌 필요한 만큼 유동적으로 설정
- 예를 들어, 클래스 C 네트워크를 여러 개의 작은 서브넷으로 나눌 수 있음

## 6. 가변 길이 서브넷 마스크 (VLSM)

### **VLSM 개요**

- **정의**: 네트워크의 각 서브넷에 필요한 호스트 수에 따라 서브넷 마스크를 유동적으로 설정하는 방법
- **장점**:
    - 주소 공간의 최적화
    - 서브넷당 필요한 호스트 수에 맞춘 유연한 설계

### **VLSM 사용 예제**

- 네트워크 요구사항에 따라 서로 다른 크기의 서브넷을 생성
- 예를 들어, 일부 서브넷은 50호스트, 다른 서브넷은 200호스트를 지원

## 7. 프라이빗 vs 퍼블릭 IP 주소

### **프라이빗 IP 주소**

- **범위**:
    - 클래스 A: 10.0.0.0 - 10.255.255.255
    - 클래스 B: 172.16.0.0 - 172.31.255.255
    - 클래스 C: 192.168.0.0 - 192.168.255.255
- **특징**:
    - 내부 네트워크에서 사용
    - 인터넷에서 직접 접근 불가
    - NAT와 함께 사용하여 퍼블릭 IP 절약

### **퍼블릭 IP 주소**

- **범위**: 프라이빗 범위를 제외한 모든 IP 주소
- **특징**:
    - 인터넷에서 직접 접근 가능
    - 유니크해야 함

## 8. 특별한 IP 주소

### **루프백 주소**

- **IPv4**: 127.0.0.1
- **IPv6**: ::1
- **용도**: 로컬 호스트 테스트

### **브로드캐스트 주소**

- **정의**: 네트워크 내 모든 호스트에게 메시지를 전송하기 위한 주소
- **예시**: 192.168.1.255 (서브넷 마스크 255.255.255.0일 때)

### **네트워크 주소**

- **정의**: 특정 네트워크 자체를 식별하는 주소
- **예시**: 192.168.1.0 (서브넷 마스크 255.255.255.0일 때)

## 9. 서브넷팅 실습 예제

### **예제 1: 다양한 서브넷 크기**

- **문제**: 192.168.10.0/24 네트워크를 4개의 서브넷으로 나누고 각 서브넷의 범위를 구하라.
- **해결**:
    1. 필요한 서브넷 수: 4 → 서브넷 비트: 2 (2²=4)
    2. 새 서브넷 마스크: /26 (255.255.255.192)
    3. 서브넷:
        - 192.168.10.0/26 (호스트: 192.168.10.1 - 192.168.10.62)
        - 192.168.10.64/26 (호스트: 192.168.10.65 - 192.168.10.126)
        - 192.168.10.128/26 (호스트: 192.168.10.129 - 192.168.10.190)
        - 192.168.10.192/26 (호스트: 192.168.10.193 - 192.168.10.254)

### **예제 2: VLSM 적용**

- **문제**: 10.0.0.0/24 네트워크를 다음 요구사항에 맞게 서브넷팅하라.
    - 서브넷 A: 50 호스트
    - 서브넷 B: 30 호스트
    - 서브넷 C: 20 호스트
- **해결**:
    1. 서브넷 A: /26 (64 주소, 62 호스트)
        - 10.0.0.0/26 (호스트: 10.0.0.1 - 10.0.0.62)
    2. 서브넷 B: /27 (32 주소, 30 호스트)
        - 10.0.0.64/27 (호스트: 10.0.0.65 - 10.0.0.94)
    3. 서브넷 C: /27 (32 주소, 30 호스트)
        - 10.0.0.96/27 (호스트: 10.0.0.97 - 10.0.0.126)